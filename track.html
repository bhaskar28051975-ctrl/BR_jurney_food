<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Track Order - BR Journey Food</title>
<style>
  :root{ --primary:#0b66c3; --dark:#09324a; --card:#fff; --bg:#eef3f7; --muted:#8f9fb3; }
  body{ font-family:"Segoe UI",Arial; margin:0; background:var(--bg); padding:18px; color:var(--dark); }
  .container{ max-width:820px; margin:0 auto; }
  .card{ background:var(--card); padding:14px; border-radius:12px; box-shadow:0 10px 28px rgba(10,30,60,0.06); border:1px solid rgba(12,40,80,0.04); }
  input,button{ width:100%; padding:12px; margin-top:10px; border-radius:10px; border:1px solid #d6dfe9; }
  button{ background:linear-gradient(90deg,var(--primary),#0a85ff); color:white; font-weight:800; border:none; }
  .order{ margin-top:12px; padding:12px; border-radius:10px; background:#f8fbff; }
  .status{ display:inline-block; padding:6px 10px; background:#eaf3ff; color:var(--primary); font-weight:800; border-radius:10px; }
  a{ color:var(--primary); text-decoration:none }
</style>
</head>
<body>
  <div class="container">
    <h2>Track Your Order</h2>
    <div class="card">
      <label>Enter phone number used for order</label>
      <input id="phone" placeholder="e.g. 9154095125">
      <button onclick="findOrders()">Find Orders</button>
      <div id="results" style="margin-top:10px;color:var(--muted)"></div>
    </div>

    <div id="ordersList"></div>

    <p style="margin-top:12px;color:var(--muted)">Note: Tracking uses browser storage. Orders placed from this device/profile will appear here.</p>
    <p><a href="index.html">← Back to Order Page</a></p>
  </div>

<script>
  function findOrders(){
    const phone = (document.getElementById('phone').value || '').trim();
    const results = document.getElementById('results');
    const list = document.getElementById('ordersList');
    list.innerHTML = ''; results.innerText = '';

    if(!phone){ results.innerText = 'Please enter phone number.'; return; }

    const raw = localStorage.getItem('br_orders');
    if(!raw){ results.innerText = 'No orders found.'; return; }

    const arr = JSON.parse(raw);
    const matches = arr.filter(o => o.phone === phone);
    if(matches.length === 0){ results.innerText = 'No orders found for this phone.'; return; }

    matches.forEach(o => {
      const el = document.createElement('div');
      el.className = 'card order';
      el.style.marginTop = '12px';
      el.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><strong>Order ID:</strong> ${o.id}</div>
          <div class="status">${o.status}</div>
        </div>
        <div style="margin-top:6px;color:#66798f;font-size:13px">Placed: ${new Date(o.createdAt).toLocaleString()}</div>
        <div style="margin-top:8px"><strong>Grand Total:</strong> ₹${o.grandTotal}</div>
        <div style="margin-top:8px"><strong>Address:</strong> ${o.address}</div>
        <div style="margin-top:8px"><strong>Items:</strong><ul>${o.items.map(i=>`<li>${i.sku} — Qty:${i.qty} — ₹${i.total}</li>`).join('')}</ul></div>
      `;
      list.appendChild(el);
    });
  }
</script>
</body>
</html>
